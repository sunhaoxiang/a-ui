import{j as t}from"./jsx-runtime-94f6e698.js";import{r as l}from"./index-8db94870.js";import{c as O,I as S}from"./index-f2e15aaf.js";import"./index-3a194ada.js";import{T}from"./index-c2560314.js";import{u as $}from"./useClickOutside-d9e6f0b7.js";import{I as B}from"./input-581fa78b.js";const j=l.createContext({selectedValues:[]}),V=s=>{const{defaultValue:r,placeholder:o,children:_,multiple:a,name:g,disabled:m,onChange:y,onVisibleChange:n}=s,c=l.useRef(null),d=l.useRef(null),u=l.useRef(0),[i,b]=l.useState(Array.isArray(r)?r:[]),[f,x]=l.useState(!1),[v,q]=l.useState(typeof r=="string"?r:""),N=(e,h)=>{a?q(""):(x(!1),q(e),n&&n(!1));let p=[e];a&&(p=h?i.filter(w=>w!==e):[...i,e],b(p)),y&&y(e,p)};l.useEffect(()=>{c.current&&(c.current.focus(),a&&i.length>0?c.current.placeholder="":o&&(c.current.placeholder=o))},[i,a,o]),l.useEffect(()=>{d.current&&(u.current=d.current.getBoundingClientRect().width)}),$(d,()=>{x(!1),n&&f&&n(!1)});const k={onSelect:N,selectedValues:i,multiple:a},E=e=>{e.preventDefault(),m||(x(!f),n&&n(!f))},I=()=>l.Children.map(_,(e,h)=>{const p=e;if(p.type.displayName==="Option")return l.cloneElement(p,{index:`select-${h}`});console.error("Warning: Select has a child which is not a Option component")}),R=O("a-select",{"menu-is-open":f,"is-disabled":m,"is-multiple":a});return t.jsxs("div",{className:R,ref:d,children:[t.jsx("div",{className:"a-select-input",onClick:E,children:t.jsx(B,{ref:c,placeholder:o,value:v,readOnly:!0,icon:"angle-down",disabled:m,name:g})}),t.jsx(j.Provider,{value:k,children:t.jsx(T,{in:f,animation:"zoom-in-top",timeout:300,children:t.jsx("ul",{className:"a-select-dropdown",children:I()})})}),a&&t.jsx("div",{className:"a-selected-tags",style:{maxWidth:u.current-32},children:i.map((e,h)=>t.jsxs("span",{className:"a-tag",children:[e,t.jsx(S,{icon:"times",onClick:()=>{N(e,!0)}})]},`tag-${h}`))})]})};V.defaultProps={name:"a-select",placeholder:"请选择"};const W=V;try{V.displayName="Select",V.__docgenInfo={description:"",displayName:"Select",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | string[]"}},placeholder:{defaultValue:{value:"请选择"},description:"",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:"a-select"},description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((selectedValue: string, selectedValues: string[]) => void)"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}}}}}catch{}try{select.displayName="select",select.__docgenInfo={description:"",displayName:"select",props:{defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | string[]"}},placeholder:{defaultValue:{value:"请选择"},description:"",name:"placeholder",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},multiple:{defaultValue:null,description:"",name:"multiple",required:!1,type:{name:"boolean"}},name:{defaultValue:{value:"a-select"},description:"",name:"name",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((selectedValue: string, selectedValues: string[]) => void)"}},onVisibleChange:{defaultValue:null,description:"",name:"onVisibleChange",required:!1,type:{name:"((visible: boolean) => void)"}}}}}catch{}const C=({value:s,label:r,disabled:o,children:_,index:a})=>{const{onSelect:g,selectedValues:m,multiple:y}=l.useContext(j),n=m.includes(s),c=O("a-select-item",{"is-disabled":o,"is-selected":n}),d=(u,i,b)=>{u.preventDefault(),g&&!o&&g(i,b)};return t.jsxs("li",{className:c,onClick:u=>{d(u,s,n)},children:[_||r||s,y&&n&&t.jsx(S,{icon:"check"})]},a)};C.displayName="Option";const A=C;try{C.displayName="Option",C.__docgenInfo={description:"",displayName:"Option",props:{index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}}}}}catch{}const D=W;D.Option=A;export{D as T};
//# sourceMappingURL=index-f8f78509.js.map
