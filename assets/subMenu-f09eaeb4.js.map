{"version":3,"file":"subMenu-f09eaeb4.js","sources":["../../src/components/Menu/menu.tsx","../../src/components/Menu/menuItem.tsx","../../src/components/Menu/subMenu.tsx"],"sourcesContent":["import { Children, createContext, useState } from 'react'\nimport classNames from 'classnames'\nimport type {\n  FC,\n  CSSProperties,\n  FunctionComponentElement,\n  ReactNode\n} from 'react'\nimport type { MenuItemProps } from './menuItem'\n\nexport type MenuMode = 'horizontal' | 'vertical'\n\nexport interface MenuProps {\n  defaultIndex?: string\n  defaultOpenSubMenus?: string[]\n  mode?: MenuMode\n  className?: string\n  style?: CSSProperties\n  onSelect?: (selectedIndex: string) => void\n  children?: ReactNode\n}\n\ninterface IMenuContext {\n  index: string\n  defaultOpenSubMenus?: string[]\n  mode?: MenuMode\n  onSelect?: (selectedIndex: string) => void\n}\n\nexport const MenuContext = createContext<IMenuContext>({ index: '0' })\n\nexport const Menu: FC<MenuProps> = props => {\n  const {\n    defaultIndex,\n    defaultOpenSubMenus,\n    className,\n    mode,\n    style,\n    onSelect,\n    children\n  } = props\n\n  const [currentActive, setActive] = useState(defaultIndex)\n\n  const classes = classNames('a-menu', className, {\n    'a-menu-vertical': mode === 'vertical',\n    'a-menu-horizontal': mode !== 'vertical'\n  })\n\n  const handleClick = (index: string) => {\n    setActive(index)\n    if (onSelect) onSelect(index)\n  }\n\n  const passedContext: IMenuContext = {\n    index: currentActive || '0',\n    defaultOpenSubMenus,\n    mode,\n    onSelect: handleClick\n  }\n\n  const renderChildren = () => {\n    return Children.map(children, child => {\n      const childElement = child as FunctionComponentElement<MenuItemProps>\n      const { displayName } = childElement.type\n\n      if (displayName === 'MenuItem' || displayName === 'SubMenu')\n        return childElement\n\n      console.error(\n        'Warning: Menu has a child which is not a MenuItem component'\n      )\n    })\n  }\n\n  return (\n    <ul className={classes} style={style} role=\"menu\">\n      <MenuContext.Provider value={passedContext}>\n        {renderChildren()}\n      </MenuContext.Provider>\n    </ul>\n  )\n}\n\nMenu.defaultProps = {\n  defaultIndex: '0',\n  defaultOpenSubMenus: [],\n  mode: 'horizontal'\n}\n\nexport default Menu\n","import { useContext } from 'react'\nimport classNames from 'classnames'\nimport { MenuContext } from './menu'\nimport type { FC, CSSProperties, ReactNode } from 'react'\n\nexport interface MenuItemProps {\n  index: string\n  disabled?: boolean\n  className?: string\n  style?: CSSProperties\n  children: ReactNode\n}\n\nexport const MenuItem: FC<MenuItemProps> = props => {\n  const { index, disabled, className, style, children } = props\n\n  const context = useContext(MenuContext)\n\n  const classes = classNames('a-menu-item', className, {\n    'is-disabled': disabled,\n    'is-active': context.index === index\n  })\n\n  const handleClick = () => {\n    if (context.onSelect && !disabled) context.onSelect(index)\n  }\n\n  return (\n    <li className={classes} style={style} onClick={handleClick}>\n      {children}\n    </li>\n  )\n}\n\nMenuItem.displayName = 'MenuItem'\n\nexport default MenuItem\n","import { Children, useContext, useState } from 'react'\nimport classNames from 'classnames'\nimport { MenuContext } from './menu'\nimport Icon from '@/components/Icon'\nimport Transition from '@/components/Transition'\nimport type { FC, FunctionComponentElement, MouseEvent, ReactNode } from 'react'\nimport type { MenuItemProps } from './menuItem'\n\nexport interface SubMenuProps {\n  index: string\n  title?: string\n  className?: string\n  children?: ReactNode\n}\n\nexport const SubMenu: FC<SubMenuProps> = props => {\n  const context = useContext(MenuContext)\n  const openedSubMenus = context.defaultOpenSubMenus as Array<string>\n  const { index, title, className, children } = props\n  const isOpened =\n    index && context.mode === 'vertical'\n      ? openedSubMenus.includes(index)\n      : false\n  const [menuOpen, setOpen] = useState(isOpened)\n  const classes = classNames('a-menu-item a-submenu-item', className, {\n    'is-active': context.index === index,\n    'is-opened': menuOpen,\n    'is-vertical': context.mode === 'vertical'\n  })\n\n  const handleClick = (e: MouseEvent) => {\n    e.preventDefault()\n    setOpen(!menuOpen)\n  }\n\n  let timer: ReturnType<typeof setTimeout>\n  const handleMouse = (e: MouseEvent, toggle: boolean) => {\n    clearTimeout(timer)\n    e.preventDefault()\n    timer = setTimeout(() => {\n      setOpen(toggle)\n    }, 300)\n  }\n\n  const clickEvents =\n    context.mode === 'vertical'\n      ? {\n          onClick: handleClick\n        }\n      : {}\n\n  const hoverEvents =\n    context.mode !== 'vertical'\n      ? {\n          onMouseEnter: (e: MouseEvent) => {\n            handleMouse(e, true)\n          },\n          onMouseLeave: (e: MouseEvent) => {\n            handleMouse(e, false)\n          }\n        }\n      : {}\n\n  const renderChildren = () => {\n    return Children.map(children, child => {\n      const childElement = child as FunctionComponentElement<MenuItemProps>\n      const { displayName } = childElement.type\n\n      if (displayName === 'MenuItem') {\n        return childElement\n      }\n\n      console.error(\n        'Warning: SubMenu has a child which is not a MenuItem component'\n      )\n    })\n  }\n\n  return (\n    <li key={index} className={classes} {...hoverEvents}>\n      <div className=\"a-submenu-title\" {...clickEvents}>\n        {title}\n        <Icon icon=\"angle-down\" className=\"arrow-icon\" />\n      </div>\n      <Transition in={menuOpen} timeout={300} animation=\"zoom-in-top\">\n        <ul className=\"a-submenu\">{renderChildren()}</ul>\n      </Transition>\n    </li>\n  )\n}\n\nSubMenu.displayName = 'SubMenu'\n\nexport default SubMenu\n"],"names":["MenuContext","createContext","Menu","props","defaultIndex","defaultOpenSubMenus","className","mode","style","onSelect","children","currentActive","setActive","useState","classes","classNames","passedContext","index","renderChildren","Children","child","childElement","displayName","jsx","Menu$1","MenuItem","disabled","context","useContext","handleClick","MenuItem$1","SubMenu","openedSubMenus","title","isOpened","menuOpen","setOpen","e","timer","handleMouse","toggle","clickEvents","hoverEvents","jsxs","Icon","Transition","SubMenu$1"],"mappings":"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"}